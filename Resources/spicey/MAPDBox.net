* C:\From Compaq\My Documents\Hobby\Speakers\Designs\SpeakerSPICEModels\MAPDBox.asc
Vin N001 0 AC 2.828 0
Re_ P001 In {Re}
Le_ N002 P001 {Le}
V_Isensor N006 0 AC 0
H§BLu N005 N006 V_uSensor {Bl}
H§Bli N008 0 V_ISensor {BL}
L§Mmd_ N010 N008 {Mmd}
Rms_ N014 N010 {Rms}
Cms_ N015 N014 {Cms}
E§SdPd N015 N016 Pf Pb {Sd}
V_uSensor N016 0 AC 0
F§Sdu Pb Pf V_uSensor {Sd}
Ra1_ Pf N018 {Ra1}
Ra2_ N018 N019 {Ra2}
Ca1_ Pf N018 {Ca1}
L§Ma1_ Pf N019 {Ma1}
Lep_ N005 N002 {Lep}
Rep_ N002 N005 {Rep}
Rsource N001 In 0.1
V_VUSensor N019 0 AC 0
B§AcousticOutput 0 0 I=I(V_SumOutput)
B§Cone_Excursion_mm 0 0 I=2.828*1000*I(V_uSensor) laplace=1/s
L§Mab_ Pb N017 {Mab}
Rab1_ N017 N011 {Rab1}
Cab1_ 0 N011 {Cab1}
RairLeak1_ N011 N012 {RairLeak1}
L§MaVarVent_ N011 N009 {MaVarVent}
RVarVent_ N009 N007 {RVarVent}
Cab2_ 0 N003 {Cab2}
RairLeak2_ N003 N004 {RairLeak2}
Rab2_ N007 N003 {Rab2}
V_VULeak1 N012 0 AC 0
V_VULeak2 N004 0 AC 0
B§DriverOutput 0 N013 I=9390.14*I(V_VUSensor) laplace=s
B§LeakOutput1 0 N013 I=9390.14*I(V_VULeak1) laplace=s
B§LeakOutput2 0 N013 I=9390.14*I(V_VULeak2) laplace=s
V_SumOutput N013 0 AC 0
.ac oct 40 10 2000
.param Bl={sqrt(Re*sqrt(Mms/Cms)/Qe)}
.param Mms=17.7e-3
.param Mmd={Mms-(16*Sd*Sd*1.18/(3*rad*pi*pi))}
.param Sd=134e-4
.param rad={sqrt(Sd/pi)}
.param Fs=52.3
.param Rms={sqrt(Mms/Cms)/Qms}
.param Cms={1/(pow(Fs*2*pi,2)*Mms)}
.param Qms=2.79
.param Qe=0.5
.param Re=5.8
.param Le=0.2m
.param Lep=0.1m
.param Rep=5
.param Ma1={8*1.18/(3*pi*pi*rad)}
.param Ra1={0.441*1.18*345/Sd}
.param Ra2={1.18*345/Sd}
.param Ca1={5.94*pow(rad,3)/(1.18*345*345)}
* Calculated parameters:
* Edit the values of the following driver parameters:\n(Le, Lep and Rep are optional)
* Outputs to be plotted:\n(Vc impedance is V(in)/I(Re_)\nand group delay is plotted\nat AcousticOutput's plot
* Edit the box parameters, Vb1 is box behind woofer, Vb2 is after the variovent (m3):
.param Vb1=4e-3
.param Cab1={Vb1/(1.18*345*345)}
.param RairLeak1=100Meg
.param Qmc1=3.5
* Use Qmc=3.5 for filled, 7.5 for unfilled as a rule of thumb
.param Vas={1.18*pow(345*Sd,2)*Cms}
.param MaVarVent={(LVarVent*1.18/(pi*RadVarVent*RadVarVent))+(2*0.65*4.18/(pi*RadVarVent))}
.param alpha={Vas/Vb1}
.param Rab1={((sqrt(1+alpha*Qms)/Qmc1) -1)*Rms/pow(Sd,2)}
.param Mab=0.65*4.18/(pi*rad)
* Use following step to try step changing box params:\n.step param Vb 10e-3 20e-3 4e-3
.measure PeakU Max mag(I(V_VUSensor))
.measure Fc when mag(I(V_VUSensor))=PeakU cross=1
.measure Flc when mag(I(V_VUSensor))=(0.708*PeakU) cross=1
.measure Fhc when mag(I(V_VUSensor))=(0.708*PeakU) cross=2
.measure Qts Param pow(10,(Fc/(Fhc-Flc))/20)
* Printed Values at Output Log:
* I have seen MAPD box usage http://www.northcreekmusic.com/MAPD1.htm,\n this SPICE model is an attempt to model it. AFP 10/10/2005
.param Vb2=8e-3
.param RairLeak2=100Meg
.param Qmc2=3.5
.param RVarVent=20K
.param RadVarVent=5e-2
.param LVarVent=0.5e-2
* VarioVent Parameters, vent resistance, radius and length:
.param Rab2={1.0e-5}
* Assume the acoustic resistance in box2 as zero, don't know yet a good way to calculate the resistance from filling inside the box
.param Cab2={Vb2/(1.18*345*345)}
* Variovent's net acoustic mass is calculated as acoustic mass of the volume \nof vent plus mass on two sides of the vent which are assumed to be filled \nboxes with B=0.65:
.backanno
.end
