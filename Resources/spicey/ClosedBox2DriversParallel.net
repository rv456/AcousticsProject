* C:\From Compaq\My Documents\Hobby\Speakers\Designs\SpeakerSPICEModels\ClosedBox2DriversParallel.asc
Vin N001 0 AC 2.828 0
Re_2 P001 In {Re2}
Le_2 N003 P001 {Le2}
V_Isensor1 N006 0 AC 0
H§BLu1 N004 N006 V_uSensor1 {Bl1}
H§Bli1 N012 0 V_ISensor1 {BL1}
L§Mmd_1 N014 N012 {Mmd1}
Rms_1 N020 N014 {Rms1}
Cms_1 N022 N020 {Cms1}
E§SdPd1 N022 N023 Pf1 Pb1 {Sd1}
V_uSensor1 N023 0 AC 0
F§Sdu1 Pb1 Pf1 V_uSensor1 {Sd1}
Ra1_1 Pf1 N016 {Ra11}
Ra2_1 N016 N017 {Ra21}
Ca1_1 Pf1 N016 {Ca11}
L§Ma1_1 Pf1 N026 {Ma11}
Lep_2 N005 N003 {Lep2}
Rep_2 N003 N005 {Rep2}
Rsource N001 In 0.1
V_WVUSensor1 N017 0 AC 0
B§AcousticOutput 0 0 I=9390.14*I(V_VUSensor) laplace=s
B§Cone1_Excursion_mm 0 0 I=2.828*1000*I(V_uSensor1) laplace=1/s
L§Mab_1 Pb1 N011 {Mab1}
Cab_ N010 N008 {Cab}
RairLeak_ N008 N009 {RairLeak}
V_WNearVUSensor1 N026 N017 AC 0
V_VUSensor 0 N010 AC 0
B§Woofer1Output 0 0 I=9390.14*I(V_WVUSensor1) laplace=s
B§LeakOutput 0 0 I=9390.14*I(V_VULeak) laplace=s
V_VULeak N009 0 AC 0
Re_1 P002 In {Re1}
Le_1 N002 P002 {Le1}
Lep_1 N004 N002 {Lep1}
Rep_1 N002 N004 {Rep1}
H§BLu2 N005 N007 V_uSensor2 {Bl2}
H§Bli2 N013 0 V_ISensor2 {BL2}
L§Mmd_2 N015 N013 {Mmd2}
Rms_2 N021 N015 {Rms2}
Cms_2 N024 N021 {Cms2}
E§SdPd2 N024 N025 Pf2 Pb2 {Sd2}
V_uSensor2 N025 0 AC 0
F§Sdu2 Pb2 Pf2 V_uSensor2 {Sd2}
Ra1_2 Pf2 N018 {Ra12}
Ra2_2 N018 N019 {Ra22}
Ca1_2 Pf2 N018 {Ca12}
L§Ma1_2 Pf2 N027 {Ma12}
V_WVUSensor2 N019 0 AC 0
L§Mab_2 Pb2 N011 {Mab2}
V_WNearVUSensor2 N027 N019 AC 0
F§kw1Uw2 N026 Pf1 V_WNearVUSensor2 {3*pi*Rad1/(16*DistW1_W2)}
F§kw2Uw1 N027 Pf2 V_WNearVUSensor1 {3*pi*Rad2/(16*DistW1_W2)}
B§Cone2_Excursion_mm 0 0 I=2.828*1000*I(V_uSensor2) laplace=1/s
B§Woofer2Output 0 0 I=9390.14*I(V_WVUSensor2) laplace=s
Rab_ N008 N011 {Rab}
V_Isensor2 N007 0 AC 0
.ac oct 40 10 2000
.param Mms1=17.7e-3
.param Sd1=134e-4
.param Fs1=52.3
.param Qms1=2.79
.param Qe1=0.5
.param Re1=5.8
.param Le1=0.2m
.param Lep1=0.1m
.param Rep1=5
.param Mms2=18e-3
.param Sd2=134e-4
.param Fs2=50
.param Qms2=2.79
.param Qe2=0.52
.param Re2=6
.param Le2=0.2m
.param Lep2=0.1m
.param Rep2=5
.param rad1={sqrt(Sd1/pi)}
.param Mmd1={Mms1-(16*Sd1*Sd1*1.18/(3*rad1*pi*pi))}
.param Cms1={1/(pow(Fs1*2*pi,2)*Mms1)}
.param Rms1={sqrt(Mms1/Cms1)/Qms1}
.param Bl1={sqrt(Re1*sqrt(Mms1/Cms1)/Qe1)}
.param Vas1={1.18*pow(345*Sd1,2)*Cms1}
.param Ma11={8*1.18/(3*pi*pi*rad1)}
.param Ra11={0.441*1.18*345/Sd1}
.param Ra21={1.18*345/Sd1}
.param Ca11={5.94*pow(rad1,3)/(1.18*345*345)}
.param Mab1=0.65*4.18/(pi*rad1)
* Calculated parameters:
* Edit the values of the following driver1&2 parameters:\n(Le, Lep and Rep are optional)
* Outputs to be plotted:\n(Vc impedance is V(in)/I(Re_)\nand group delay is plotted\nat AcousticOutput's plot
* Edit the box parameters (m3):
.param Vb=28e-3
.param RairLeak=100Meg
.param Qmc=3.5
.param Cab={Vb/(1.18*345*345)}
* Use following step to try step changing box params:\n.step param Vb 10e-3 20e-3 4e-3
.measure PeakU Max mag(I(V_VUSensor))
.measure Fc when mag(I(V_VUSensor))=PeakU cross=1
.measure Flc when mag(I(V_VUSensor))=(0.708*PeakU) cross=1
.measure Fhc when mag(I(V_VUSensor))=(0.708*PeakU) cross=2
.measure Qtc Param pow(10,(Fc/(Fhc-Flc))/20)
.measure Qmc Param {Qmc}
.measure Vas1 Param {Vas1}
.measure Vas2 Param {Vas2}
.measure Alpha Param {alpha}
.param DistW1_W2=0.5
* Distance between woofers, for mutual radiation load.\nMake it very high for ignoring this: (as everything else in meters):
* Printed Values at Output Log:
.param rad2={sqrt(Sd2/pi)}
.param Mmd2={Mms2-(16*Sd2*Sd2*1.18/(3*rad2*pi*pi))}
.param Cms2={1/(pow(Fs2*2*pi,2)*Mms2)}
.param Rms2={sqrt(Mms2/Cms2)/Qms2}
.param Bl2={sqrt(Re2*sqrt(Mms2/Cms2)/Qe2)}
.param Vas2={1.18*pow(345*Sd2,2)*Cms2}
.param Ma12={8*1.18/(3*pi*pi*rad2)}
.param Ra12={0.441*1.18*345/Sd2}
.param Ra22={1.18*345/Sd2}
.param Ca12={5.94*pow(rad2,3)/(1.18*345*345)}
.param Mab2=0.65*4.18/(pi*rad2)
* Use Qmc=3.5 for filled, 7.5 for unfilled
* Below using (Vas1+Vas2)/Vb as average alpha
* Assume the acoustic resistance in box2 as zero, don't know yet\n a good way to calculate the resistance from filling inside the box
.param Rab={1.0e-5}
.backanno
.end
