Version 4
SHEET 1 880 680
WIRE -1712 -640 -1712 -672
WIRE -1712 -512 -1712 -560
WIRE -1712 -496 -1712 -512
WIRE -1664 -672 -1712 -672
WIRE -1552 -672 -1584 -672
WIRE -1536 -672 -1552 -672
WIRE -1488 -512 -1712 -512
WIRE -1360 -672 -1376 -672
WIRE -1360 -672 -1360 -768
WIRE -1344 -768 -1360 -768
WIRE -1344 -672 -1360 -672
WIRE -1248 -768 -1264 -768
WIRE -1248 -672 -1264 -672
WIRE -1248 -672 -1248 -768
WIRE -1216 -672 -1248 -672
WIRE -1216 -640 -1216 -672
WIRE -1216 -512 -1408 -512
WIRE -1216 -512 -1216 -560
WIRE -1136 -416 -1136 -496
WIRE -1136 -208 -1136 -336
WIRE -1072 -704 -1072 -752
WIRE -1072 -608 -1072 -624
WIRE -1072 -576 -1072 -608
WIRE -992 -496 -1136 -496
WIRE -992 -416 -992 -496
WIRE -992 -208 -1136 -208
WIRE -992 -208 -992 -336
WIRE -976 -752 -1072 -752
WIRE -928 -608 -1072 -608
WIRE -880 -208 -992 -208
WIRE -864 -752 -896 -752
WIRE -864 -496 -992 -496
WIRE -864 -480 -864 -496
WIRE -864 -384 -864 -416
WIRE -848 -64 -848 -80
WIRE -848 32 -848 16
WIRE -848 48 -848 32
WIRE -800 -80 -848 -80
WIRE -800 32 -848 32
WIRE -800 32 -800 -80
WIRE -768 -752 -784 -752
WIRE -736 -496 -864 -496
WIRE -736 -384 -864 -384
WIRE -736 -384 -736 -416
WIRE -736 -368 -736 -384
WIRE -736 -208 -800 -208
WIRE -736 -208 -736 -288
WIRE -704 -208 -736 -208
WIRE -688 -496 -736 -496
WIRE -672 -752 -704 -752
WIRE -672 -720 -672 -752
WIRE -672 -608 -848 -608
WIRE -672 -608 -672 -640
WIRE -576 -496 -608 -496
WIRE -576 -432 -576 -496
WIRE -576 -320 -576 -352
WIRE -576 -208 -624 -208
WIRE -576 -208 -576 -240
WIRE -544 -64 -544 -80
WIRE -544 32 -544 16
WIRE -544 48 -544 32
WIRE -496 -80 -544 -80
WIRE -496 32 -544 32
WIRE -496 32 -496 -80
WIRE -448 -496 -576 -496
WIRE -448 -416 -448 -496
WIRE -448 -336 -448 -352
WIRE -448 -208 -576 -208
WIRE -448 -208 -448 -256
WIRE -416 -496 -448 -496
WIRE -352 -208 -448 -208
WIRE -352 -192 -352 -208
WIRE -320 -496 -336 -496
WIRE -304 -496 -320 -496
WIRE -288 -208 -352 -208
WIRE -192 -496 -224 -496
WIRE -192 -64 -192 -80
WIRE -192 32 -192 16
WIRE -192 48 -192 32
WIRE -160 -496 -192 -496
WIRE -160 -400 -160 -416
WIRE -160 -208 -208 -208
WIRE -160 -208 -160 -320
WIRE -144 -80 -192 -80
WIRE -144 32 -192 32
WIRE -144 32 -144 -80
WIRE -112 -208 -160 -208
WIRE -48 -496 -160 -496
WIRE -48 -416 -160 -416
WIRE -48 -416 -48 -432
WIRE 32 -496 -48 -496
WIRE 32 -432 32 -496
WIRE 32 -208 -32 -208
WIRE 32 -208 32 -352
WIRE 160 -496 32 -496
WIRE 160 -416 160 -496
WIRE 160 -208 32 -208
WIRE 160 -208 160 -336
WIRE 160 -64 160 -80
WIRE 160 32 160 16
WIRE 160 48 160 32
WIRE 176 112 176 96
WIRE 176 208 176 192
WIRE 176 224 176 208
WIRE 208 -80 160 -80
WIRE 208 32 160 32
WIRE 208 32 208 -80
WIRE 224 96 176 96
WIRE 224 208 176 208
WIRE 224 208 224 96
FLAG -1712 -496 0
FLAG -1072 -576 0
FLAG -352 -192 0
FLAG -192 -496 Pf
FLAG -1552 -672 In
FLAG -848 48 0
FLAG -544 48 0
FLAG -320 -496 Pb
FLAG -192 48 0
FLAG 160 48 0
FLAG 176 224 0
SYMBOL voltage -1712 -656 R0
WINDOW 3 24 44 Left 0
WINDOW 123 -135 99 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -59 15 Left 0
SYMATTR Value ""
SYMATTR Value2 AC 2.828 0
SYMATTR InstName Vin
SYMBOL res -1440 -688 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Re_
SYMATTR Value {Re}
SYMBOL ind -1360 -688 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Le_
SYMATTR Value {Le}
SYMBOL voltage -1392 -512 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_Isensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL h -1216 -656 R0
WINDOW 3 24 44 Invisible 0
SYMATTR Value V_uSensor
SYMATTR InstName BLu
SYMATTR Value2 {Bl}
SYMBOL h -1072 -720 R0
WINDOW 0 5 8 Left 0
WINDOW 3 24 104 Invisible 0
SYMATTR InstName Bli
SYMATTR Value V_ISensor
SYMATTR Value2 {BL}
SYMBOL ind -880 -768 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mmd_
SYMATTR Value {Mmd}
SYMBOL res -768 -768 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rms_
SYMATTR Value {Rms}
SYMBOL cap -704 -768 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Cms_
SYMATTR Value {Cms}
SYMBOL h -672 -736 R0
WINDOW 3 24 104 Invisible 0
SYMATTR Value Pf
SYMATTR InstName SdPd
SYMATTR Prefix E
SYMATTR Value2 Pb
SYMATTR SpiceLine {Sd}
SYMBOL voltage -832 -608 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_uSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL f -304 -496 R270
WINDOW 3 24 88 Invisible 0
SYMATTR Value V_uSensor
SYMATTR InstName Sdu
SYMATTR Value2 {Sd}
SYMBOL res -176 -512 R0
SYMATTR InstName Ra1_
SYMATTR Value {Ra1}
SYMBOL res -176 -416 R0
SYMATTR InstName Ra2_
SYMATTR Value {Ra2}
SYMBOL cap -64 -496 R0
SYMATTR InstName Ca1_
SYMATTR Value {Ca1}
SYMBOL ind 16 -448 R0
SYMATTR InstName Ma1_
SYMATTR Value {Ma1}
SYMBOL ind -1248 -688 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Lep_
SYMATTR Value {Lep}
SYMBOL res -1360 -752 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rep_
SYMATTR Value {Rep}
SYMBOL res -1680 -656 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rsource
SYMATTR Value 0.1
SYMBOL voltage -192 -208 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WVUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL bi -848 16 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 60 Left 0
SYMATTR InstName AcousticOutput
SYMATTR Value I=9390.14*I(V_VUSensor)
SYMATTR SpiceLine laplace=s
SYMBOL bi -544 16 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName Cone_Excursion_mm
SYMATTR Value I=2.828*1000*I(V_uSensor)
SYMATTR SpiceLine laplace=1/s
SYMBOL ind -320 -512 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mab_
SYMATTR Value {Mab}
SYMBOL cap -432 -352 R180
WINDOW 0 24 64 Left 0
WINDOW 3 24 8 Left 0
SYMATTR InstName Cab_
SYMATTR Value {Cab}
SYMBOL res -560 -448 M0
SYMATTR InstName RairLeak_
SYMATTR Value {RairLeak}
SYMBOL voltage -16 -208 R90
WINDOW 0 -36 28 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WNearVUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL voltage -448 -240 R180
WINDOW 0 -45 70 Bottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_VUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL voltage -720 -208 M90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_PVUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL voltage -896 -208 M90
WINDOW 0 -32 29 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_PNearVUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL ind -592 -512 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Map_
SYMATTR Value {Map}
SYMBOL cap -848 -480 M0
SYMATTR InstName Ca1P_
SYMATTR Value {Ca1P}
SYMBOL ind -976 -432 M0
SYMATTR InstName Ma1P_
SYMATTR Value {Ma1P}
SYMBOL res -720 -512 M0
SYMATTR InstName Ra1P_
SYMATTR Value {Ra1P}
SYMBOL res -720 -384 M0
SYMATTR InstName Ra2P_
SYMATTR Value {Ra2P}
SYMBOL bi -192 16 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName PortOutput
SYMATTR Value I=9390.14*I(V_PVUSensor)
SYMATTR SpiceLine laplace=s
SYMBOL bi 160 16 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName WooferOutput
SYMATTR Value I=9390.14*I(V_WVUSensor)
SYMATTR SpiceLine laplace=s
SYMBOL f -1136 -336 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Invisible 0
SYMATTR InstName kpUw
SYMATTR Value V_WNearVUSensor
SYMATTR Value2 {3*pi*RadP/(16*DistW_P)}
SYMBOL f 160 -336 M180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Invisible 0
SYMATTR InstName kwUp
SYMATTR Value V_PNearVUSensor
SYMATTR Value2 {3*pi*Rad/(16*DistW_P)}
SYMBOL bi 176 192 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName LeakOutput
SYMATTR Value I=9390.14*I(V_VULeak)
SYMATTR SpiceLine laplace=s
SYMBOL voltage -576 -336 R0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_VULeak
SYMATTR Value ""
SYMATTR Value2 AC 0
TEXT -1610 -742 Left 0 !.ac oct 40 10 2000
TEXT -1952 16 Left 0 !.param Bl={sqrt(Re*sqrt(Mms/Cms)/Qe)}
TEXT -2216 -744 Left 0 !.param Mms=17.7e-3
TEXT -1952 -80 Left 0 !.param Mmd={Mms-(16*Sd*Sd*1.18/(3*rad*pi*pi))}
TEXT -2216 -712 Left 0 !.param Sd=134e-4
TEXT -1952 -112 Left 0 !.param rad={sqrt(Sd/pi)}
TEXT -2216 -680 Left 0 !.param Fs=52.3
TEXT -1952 -16 Left 0 !.param Rms={sqrt(Mms/Cms)/Qms}
TEXT -1952 -48 Left 0 !.param Cms={1/(pow(Fs*2*pi,2)*Mms)}
TEXT -2216 -648 Left 0 !.param Qms=2.79
TEXT -2216 -616 Left 0 !.param Qe=0.5
TEXT -2216 -584 Left 0 !.param Re=5.8
TEXT -2216 -552 Left 0 !.param Le=0.2m
TEXT -2216 -520 Left 0 !.param Lep=0.1m
TEXT -2216 -488 Left 0 !.param Rep=5
TEXT -1952 48 Left 0 !.param Ma1={8*1.18/(3*pi*pi*rad)}
TEXT -1952 80 Left 0 !.param Ra1={0.441*1.18*345/Sd}
TEXT -1952 112 Left 0 !.param Ra2={1.18*345/Sd}
TEXT -1952 144 Left 0 !.param Ca1={5.94*pow(rad,3)/(1.18*345*345)}
TEXT -2216 -104 Left 0 ;Calculated parameters:
TEXT -2216 -808 Left 0 ;Edit the values of the following driver parameters:\n(Le, Lep and Rep are optional)
TEXT -1344 -136 Left 0 ;Outputs to be plotted:\n(Vc impedance is V(in)/I(Re_)\nand group delay is plotted\nat AcousticOutput's plot
TEXT -2216 -448 Left 0 ;Edit the box parameters (m3):
TEXT -2216 -416 Left 0 !.param Vb=14e-3
TEXT -1952 176 Left 0 !.param Cab={Vb/(1.18*345*345)}
TEXT -1952 304 Left 0 !.param RairLeak={QL/(2*pi*Fb*Cab)}\n.param Ma1p={8*1.18/(3*pi*pi*RadP)}\n.param Map={(1/(pow(2*pi*Fb,2)*Cab))-Ma1p}\n.param Ra2P={1.18*345/(pi*RadP*RadP)}\n.param Ra1P={0.441*1.18*345/(pi*RadP*RadP)}\n.param Ca1P={5.94*pow(RadP,3)/(1.18*345*345)}
TEXT -2216 -352 Left 0 !.param Ql=7
TEXT -2216 -320 Left 0 !.param RadP=2.5e-2
TEXT -1952 208 Left 0 !.param Vas={1.18*pow(345*Sd,2)*Cms}
TEXT -1952 272 Left 0 !.param Mab=0.65*2.0/(pi*rad)
TEXT -1880 -408 Left 0 ;Use following step to try step changing box params:\n.step param Vb 10e-3 20e-3 4e-3
TEXT -1912 240 Left 0 ;For Mab, use 0.65*2...  to account for some filling used:
TEXT -1176 184 Left 0 !.measure PortLengthINcms Param pow(10, 5*(((Map*pi*radp*radp/1.18)-(0.6132*sqrt(radp*radp)))))
TEXT -2216 -384 Left 0 !.param Fb=50
TEXT -2216 -240 Left 0 !.param DistW_P=0.5
TEXT -2192 -296 Left 0 ;Distance between port and woofer opening, for mutual radiation.\nMake it very high for ignoring this: (as everything else in meters):
TEXT -1360 152 Left 0 ;Printed Values at Output Log:
