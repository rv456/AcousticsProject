Version 4
SHEET 1 880 1180
WIRE -1520 -688 -1520 -720
WIRE -1520 -576 -1520 -608
WIRE -1520 -544 -1520 -576
WIRE -1472 -720 -1520 -720
WIRE -1360 -720 -1392 -720
WIRE -1344 -720 -1360 -720
WIRE -1296 -576 -1520 -576
WIRE -1200 304 -1200 288
WIRE -1200 400 -1200 384
WIRE -1200 416 -1200 400
WIRE -1200 480 -1200 464
WIRE -1200 576 -1200 560
WIRE -1200 592 -1200 576
WIRE -1168 -720 -1184 -720
WIRE -1168 -720 -1168 -816
WIRE -1152 -816 -1168 -816
WIRE -1152 -720 -1168 -720
WIRE -1152 288 -1200 288
WIRE -1152 400 -1200 400
WIRE -1152 400 -1152 288
WIRE -1152 464 -1200 464
WIRE -1152 576 -1200 576
WIRE -1152 576 -1152 464
WIRE -1056 -816 -1072 -816
WIRE -1056 -720 -1072 -720
WIRE -1056 -720 -1056 -816
WIRE -1024 -720 -1056 -720
WIRE -1024 144 -1024 128
WIRE -1024 240 -1024 224
WIRE -1024 256 -1024 240
WIRE -976 128 -1024 128
WIRE -976 240 -1024 240
WIRE -976 240 -976 128
WIRE -928 -720 -944 -720
WIRE -816 304 -816 288
WIRE -816 400 -816 384
WIRE -816 416 -816 400
WIRE -784 464 -784 448
WIRE -784 560 -784 544
WIRE -784 576 -784 560
WIRE -768 288 -816 288
WIRE -768 400 -816 400
WIRE -768 400 -768 288
WIRE -752 -720 -768 -720
WIRE -752 -720 -752 -816
WIRE -752 -224 -752 -288
WIRE -752 -112 -752 -144
WIRE -752 0 -752 -32
WIRE -736 -816 -752 -816
WIRE -736 -720 -752 -720
WIRE -736 448 -784 448
WIRE -736 560 -784 560
WIRE -736 560 -736 448
WIRE -720 144 -720 128
WIRE -720 240 -720 224
WIRE -720 256 -720 240
WIRE -672 128 -720 128
WIRE -672 240 -720 240
WIRE -672 240 -672 128
WIRE -640 -816 -656 -816
WIRE -640 -720 -656 -720
WIRE -640 -720 -640 -816
WIRE -624 -288 -752 -288
WIRE -624 -208 -624 -288
WIRE -624 -128 -624 -144
WIRE -624 0 -752 0
WIRE -624 0 -624 -48
WIRE -624 48 -624 0
WIRE -608 -720 -640 -720
WIRE -608 -288 -624 -288
WIRE -528 -576 -1216 -576
WIRE -528 -576 -528 -720
WIRE -512 0 -624 0
WIRE -512 400 -512 0
WIRE -496 -288 -528 -288
WIRE -496 112 -496 -288
WIRE -464 -288 -496 -288
WIRE -448 112 -496 112
WIRE -432 -784 -432 -832
WIRE -432 -688 -432 -704
WIRE -432 -656 -432 -688
WIRE -432 -560 -432 -608
WIRE -432 -464 -432 -480
WIRE -432 -432 -432 -464
WIRE -368 -288 -384 -288
WIRE -352 -288 -368 -288
WIRE -352 112 -368 112
WIRE -336 -832 -432 -832
WIRE -336 -608 -432 -608
WIRE -336 0 -512 0
WIRE -336 112 -352 112
WIRE -320 400 -512 400
WIRE -288 -688 -432 -688
WIRE -288 -464 -432 -464
WIRE -240 -288 -272 -288
WIRE -224 -832 -256 -832
WIRE -224 -608 -256 -608
WIRE -224 112 -256 112
WIRE -208 -288 -240 -288
WIRE -208 -192 -208 -208
WIRE -208 0 -256 0
WIRE -208 0 -208 -112
WIRE -192 112 -224 112
WIRE -192 208 -192 192
WIRE -192 400 -240 400
WIRE -192 400 -192 288
WIRE -160 0 -208 0
WIRE -144 400 -192 400
WIRE -128 -832 -144 -832
WIRE -128 -608 -144 -608
WIRE -96 -288 -208 -288
WIRE -96 -208 -208 -208
WIRE -96 -208 -96 -224
WIRE -80 112 -192 112
WIRE -80 192 -192 192
WIRE -80 192 -80 176
WIRE -32 -832 -64 -832
WIRE -32 -800 -32 -832
WIRE -32 -688 -208 -688
WIRE -32 -688 -32 -720
WIRE -32 -608 -64 -608
WIRE -32 -576 -32 -608
WIRE -32 -464 -208 -464
WIRE -32 -464 -32 -496
WIRE -16 -288 -96 -288
WIRE -16 -224 -16 -288
WIRE -16 0 -80 0
WIRE -16 0 -16 -144
WIRE 0 112 -80 112
WIRE 0 176 0 112
WIRE 0 400 -64 400
WIRE 0 400 0 256
WIRE 96 -288 -16 -288
WIRE 96 -128 96 -288
WIRE 96 0 -16 0
WIRE 96 0 96 -48
WIRE 96 112 0 112
WIRE 96 272 96 112
WIRE 96 400 0 400
WIRE 96 400 96 352
FLAG -1520 -544 0
FLAG -432 -656 0
FLAG -624 48 0
FLAG -240 -288 Pf1
FLAG -1360 -720 In
FLAG -1024 256 0
FLAG -720 256 0
FLAG -368 -288 Pb1
FLAG -816 416 0
FLAG -1200 592 0
FLAG -432 -432 0
FLAG -224 112 Pf2
FLAG -352 112 Pb2
FLAG -1200 416 0
FLAG -784 576 0
SYMBOL voltage -1520 -704 R0
WINDOW 3 24 44 Left 0
WINDOW 123 -135 99 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -59 15 Left 0
SYMATTR Value ""
SYMATTR Value2 AC 2.828 0
SYMATTR InstName Vin
SYMBOL res -832 -736 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Re_2
SYMATTR Value {Re2}
SYMBOL ind -752 -736 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Le_2
SYMATTR Value {Le2}
SYMBOL voltage -1200 -576 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_Isensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL h -1040 -720 R270
WINDOW 3 -32 56 VBottom 0
WINDOW 0 32 56 VTop 0
SYMATTR Value V_uSensor1
SYMATTR InstName BLu1
SYMATTR Value2 {Bl1}
SYMBOL h -432 -800 R0
WINDOW 0 5 8 Left 0
WINDOW 3 24 104 Invisible 0
SYMATTR InstName Bli1
SYMATTR Value V_ISensor
SYMATTR Value2 {BL1}
SYMBOL ind -240 -848 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mmd_1
SYMATTR Value {Mmd1}
SYMBOL res -128 -848 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rms_1
SYMATTR Value {Rms1}
SYMBOL cap -64 -848 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Cms_1
SYMATTR Value {Cms1}
SYMBOL h -32 -816 R0
WINDOW 3 24 104 Invisible 0
SYMATTR Value Pf1
SYMATTR InstName SdPd1
SYMATTR Prefix E
SYMATTR Value2 Pb1
SYMATTR SpiceLine {Sd1}
SYMBOL voltage -192 -688 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_uSensor1
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL f -352 -288 R270
WINDOW 3 24 88 Invisible 0
WINDOW 0 51 14 VRight 0
SYMATTR Value V_uSensor1
SYMATTR InstName Sdu1
SYMATTR Value2 {Sd1}
SYMBOL res -224 -304 R0
SYMATTR InstName Ra1_1
SYMATTR Value {Ra11}
SYMBOL res -224 -208 R0
SYMATTR InstName Ra2_1
SYMATTR Value {Ra21}
SYMBOL cap -112 -288 R0
SYMATTR InstName Ca1_1
SYMATTR Value {Ca11}
SYMBOL ind -32 -240 R0
SYMATTR InstName Ma1_1
SYMATTR Value {Ma11}
SYMBOL ind -640 -736 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Lep_2
SYMATTR Value {Lep2}
SYMBOL res -752 -800 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rep_2
SYMATTR Value {Rep2}
SYMBOL res -1488 -704 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rsource
SYMATTR Value 0.1
SYMBOL voltage -240 0 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WVUSensor1
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL bi -1024 224 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 60 Left 0
SYMATTR InstName AcousticOutput
SYMATTR Value I=9390.14*I(V_VUSensor)
SYMATTR SpiceLine laplace=s
SYMBOL bi -720 224 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName Cone1_Excursion_mm
SYMATTR Value I=2.828*1000*I(V_uSensor1)
SYMATTR SpiceLine laplace=1/s
SYMBOL ind -368 -304 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mab_1
SYMATTR Value {Mab1}
SYMBOL cap -608 -144 R180
WINDOW 0 24 64 Left 0
WINDOW 3 24 8 Left 0
SYMATTR InstName Cab_
SYMATTR Value {Cab}
SYMBOL res -736 -240 M0
SYMATTR InstName RairLeak_
SYMATTR Value {RairLeak}
SYMBOL voltage -64 0 R90
WINDOW 0 -36 28 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WNearVUSensor1
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL voltage -624 -32 R180
WINDOW 0 -45 70 Bottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_VUSensor
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL bi -816 384 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName Woofer1Output
SYMATTR Value I=9390.14*I(V_WVUSensor1)
SYMATTR SpiceLine laplace=s
SYMBOL bi -1200 560 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName LeakOutput
SYMATTR Value I=9390.14*I(V_VULeak)
SYMATTR SpiceLine laplace=s
SYMBOL voltage -752 -128 R0
WINDOW 39 0 0 Left 0
WINDOW 0 -143 47 Left 0
SYMATTR InstName V_VULeak
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL res -1248 -736 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Re_1
SYMATTR Value {Re1}
SYMBOL ind -1168 -736 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Le_1
SYMATTR Value {Le1}
SYMBOL ind -1056 -736 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Lep_1
SYMATTR Value {Lep1}
SYMBOL res -1168 -800 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rep_1
SYMATTR Value {Rep1}
SYMBOL h -624 -720 R270
WINDOW 3 -32 56 VBottom 0
WINDOW 0 32 56 VTop 0
SYMATTR Value V_uSensor2
SYMATTR InstName BLu2
SYMATTR Value2 {Bl2}
SYMBOL h -432 -576 R0
WINDOW 0 5 8 Left 0
WINDOW 3 24 104 Invisible 0
SYMATTR InstName Bli2
SYMATTR Value V_ISensor
SYMATTR Value2 {BL2}
SYMBOL ind -240 -624 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mmd_2
SYMATTR Value {Mmd2}
SYMBOL res -128 -624 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Rms_2
SYMATTR Value {Rms2}
SYMBOL cap -64 -624 R90
WINDOW 0 0 32 VBottom 0
WINDOW 3 32 32 VTop 0
SYMATTR InstName Cms_2
SYMATTR Value {Cms2}
SYMBOL h -32 -592 R0
WINDOW 3 24 104 Invisible 0
SYMATTR Value Pf2
SYMATTR InstName SdPd2
SYMATTR Prefix E
SYMATTR Value2 Pb2
SYMATTR SpiceLine {Sd2}
SYMBOL voltage -192 -464 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_uSensor2
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL f -336 112 R270
WINDOW 3 24 88 Invisible 0
WINDOW 0 51 14 VRight 0
SYMATTR Value V_uSensor2
SYMATTR InstName Sdu2
SYMATTR Value2 {Sd2}
SYMBOL res -208 96 R0
SYMATTR InstName Ra1_2
SYMATTR Value {Ra12}
SYMBOL res -208 192 R0
SYMATTR InstName Ra2_2
SYMATTR Value {Ra22}
SYMBOL cap -96 112 R0
SYMATTR InstName Ca1_2
SYMATTR Value {Ca12}
SYMBOL ind -16 160 R0
SYMATTR InstName Ma1_2
SYMATTR Value {Ma12}
SYMBOL voltage -224 400 R90
WINDOW 0 -32 56 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WVUSensor2
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL ind -352 96 R90
WINDOW 0 5 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName Mab_2
SYMATTR Value {Mab2}
SYMBOL voltage -48 400 R90
WINDOW 0 -36 28 VBottom 0
WINDOW 3 32 56 VTop 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_WNearVUSensor2
SYMATTR Value ""
SYMATTR Value2 AC 0
SYMBOL f 96 -48 M180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Invisible 0
SYMATTR InstName kw1Uw2
SYMATTR Value V_WNearVUSensor2
SYMATTR Value2 {3*pi*Rad1/(16*DistW1_W2)}
SYMBOL f 96 352 M180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Invisible 0
SYMATTR InstName kw2Uw1
SYMATTR Value V_WNearVUSensor1
SYMATTR Value2 {3*pi*Rad2/(16*DistW1_W2)}
SYMBOL bi -1200 384 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName Cone2_Excursion_mm
SYMATTR Value I=2.828*1000*I(V_uSensor2)
SYMATTR SpiceLine laplace=1/s
SYMBOL bi -784 544 R180
WINDOW 0 24 88 Left 0
WINDOW 3 24 0 Left 0
WINDOW 39 24 -28 Left 0
SYMATTR InstName Woofer2Output
SYMATTR Value I=9390.14*I(V_WVUSensor2)
SYMATTR SpiceLine laplace=s
SYMBOL res -624 -272 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName Rab_
SYMATTR Value {Rab}
TEXT -1594 -782 Left 0 !.ac oct 40 10 2000
TEXT -2208 -752 Left 0 !.param Mms1=17.7e-3\n.param Sd1=134e-4\n.param Fs1=52.3\n.param Qms1=2.79\n.param Qe1=0.5\n.param Re1=5.8\n.param Le1=0.2m\n.param Lep1=0.1m\n.param Rep1=5
TEXT -1912 -752 Left 0 !.param Mms2=18e-3\n.param Sd2=134e-4\n.param Fs2=50\n.param Qms2=2.79\n.param Qe2=0.52\n.param Re2=6\n.param Le2=0.2m\n.param Lep2=0.1m\n.param Rep2=5
TEXT -2192 -64 Left 0 !.param rad1={sqrt(Sd1/pi)}\n.param Mmd1={Mms1-(16*Sd1*Sd1*1.18/(3*rad1*pi*pi))}\n.param Cms1={1/(pow(Fs1*2*pi,2)*Mms1)}\n.param Rms1={sqrt(Mms1/Cms1)/Qms1}\n.param Bl1={sqrt(Re1*sqrt(Mms1/Cms1)/Qe1)}\n.param Vas1={1.18*pow(345*Sd1,2)*Cms1}\n.param Ma11={8*1.18/(3*pi*pi*rad1)}\n.param Ra11={0.441*1.18*345/Sd1}\n.param Ra21={1.18*345/Sd1}\n.param Ca11={5.94*pow(rad1,3)/(1.18*345*345)}\n.param Mab1=0.65*4.18/(pi*rad1)
TEXT -2216 -104 Left 0 ;Calculated parameters:
TEXT -2216 -808 Left 0 ;Edit the values of the following driver1&2 parameters:\n(Le, Lep and Rep are optional)
TEXT -1520 72 Left 0 ;Outputs to be plotted:\n(Vc impedance is V(in)/I(Re_)\nand group delay is plotted\nat AcousticOutput's plot
TEXT -2216 -448 Left 0 ;Edit the box parameters (m3):
TEXT -2216 -416 Left 0 !.param Vb=28e-3\n.param RairLeak=100Meg\n.param Qmc=3.5
TEXT -2192 640 Left 0 !.param Cab={Vb/(1.18*345*345)}
TEXT -1728 -416 Left 0 ;Use following step to try step changing box params:\n.step param Vb 10e-3 20e-3 4e-3
TEXT -568 552 Left 0 !.measure PeakU Max mag(I(V_VUSensor))\n.measure Fc when mag(I(V_VUSensor))=PeakU cross=1\n.measure Flc when mag(I(V_VUSensor))=(0.708*PeakU) cross=1\n.measure Fhc when mag(I(V_VUSensor))=(0.708*PeakU) cross=2\n.measure Qtc Param pow(10,(Fc/(Fhc-Flc))/20)\n.measure Qmc Param {Qmc}\n.measure Vas1 Param {Vas1}\n.measure Vas2 Param {Vas2}\n.measure Alpha Param {alpha}
TEXT -2216 -240 Left 0 !.param DistW1_W2=0.5
TEXT -2192 -296 Left 0 ;Distance between woofers, for mutual radiation load.\nMake it very high for ignoring this: (as everything else in meters):
TEXT -640 512 Left 0 ;Printed Values at Output Log:
TEXT -2192 280 Left 0 !.param rad2={sqrt(Sd2/pi)}\n.param Mmd2={Mms2-(16*Sd2*Sd2*1.18/(3*rad2*pi*pi))}\n.param Cms2={1/(pow(Fs2*2*pi,2)*Mms2)}\n.param Rms2={sqrt(Mms2/Cms2)/Qms2}\n.param Bl2={sqrt(Re2*sqrt(Mms2/Cms2)/Qe2)}\n.param Vas2={1.18*pow(345*Sd2,2)*Cms2}\n.param Ma12={8*1.18/(3*pi*pi*rad2)}\n.param Ra12={0.441*1.18*345/Sd2}\n.param Ra22={1.18*345/Sd2}\n.param Ca12={5.94*pow(rad2,3)/(1.18*345*345)}\n.param Mab2=0.65*4.18/(pi*rad2)
TEXT -2184 -336 Left 0 ;Use Qmc=3.5 for filled, 7.5 for unfilled
TEXT -2136 608 Left 0 ;Below using (Vas1+Vas2)/Vb as average alpha
TEXT -2128 672 Left 0 ;Assume the acoustic resistance in box2 as zero, don't know yet\n a good way to calculate the resistance from filling inside the box
TEXT -2192 728 Left 0 !.param Rab={1.0e-5}
